<div class="justify-center">
  <app-header></app-header>
</div>
<div class="flex my-14 justify-center gap-6">
  <div class="max-w-xl">
    <ul id="users" class="flex flex-col gap-2 mr-2.5">
      @for(user of users; track user.id){
        <li>
          <app-user
            [user]="user"
            [selected]="selectedUserId() === user.id"
            (select)="onSelectUser($event)"
          />
        </li>
      }
    </ul>
  </div>

  @if (selectedUserTasks().length > 0) {
    <app-card
      (addTask)="onStartAddTask()"
      (delete)="onDeleteTask($event)"
      [name]="selectedUserName()"
      [task]="selectedUserTasks()">
    </app-card>
  } @else {
    <div class="bg-purple-400/10 rounded-lg p-8 text-center border border-purple-500/20 w-104">
      <div class="text-6xl mb-4 opacity-20">ðŸ“‹</div>
      <p class="text-purple-300 font-Poppins text-lg mb-4">
        No tasks for {{ selectedUserName() }}
      </p>
      <button
        (click)="onStartAddTask()"
        class="bg-purple-600/40 hover:bg-purple-500 active:bg-purple-600 text-purple-100 font-Poppins text-sm font-medium px-6 py-2.5 rounded-lg border border-purple-500/30 transition-all duration-200 cursor-pointer hover:shadow-lg hover:scale-105">
        Add Task
      </button>
    </div>
  }

  @if (isAddingTask()) {
  <app-new-task
    [userId]="selectedUserId()"
    (cancel)="onCloseAddTask()"
    (add)="onAddTask($event)">
  </app-new-task>
}
</div>
